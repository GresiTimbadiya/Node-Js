<%- include('../header') %>


    <div class="page-wrapper">

        <div class="page-breadcrumb">
            <div class="row">
                <div class="col-12 d-flex no-block align-items-center">
                    <div class="ml-auto text-right">
                        <nav aria-label="breadcrumb">
                            <ol class="breadcrumb">
                                <li class="breadcrumb-item"><a href="#">Home</a></li>
                                <li class="breadcrumb-item active" aria-current="page">Library</li>
                            </ol>
                        </nav>
                    </div>
                </div>
            </div>
        </div>
        <div class="container-fluid">
            <div class="row justify-content-center">
                <div class="col-md-6">
                    <div class="card">
                        <form class="form-horizontal" action="/extraCategory/addExtraCategoryData" method="post">
                            <div class="card-body pb-0 pr-0">
                                <h4 class="card-title text-center mb-4">Add Extra Category</h4>
                                <div class="col-md-9">
                                    <div class="form-group row">
                                        <label for="fname"
                                            class="col-sm-6 text-right control-label col-form-label">Category
                                            Name</label>
                                        <div class="col-sm-6 p-0">
                                            <select name="category" id="category" class="form-control custom-select"
                                                style="width: 190px;">
                                                <option>--Select Category--</option>
                                                <% categories.map((val)=>{ %>
                                                    <option value="<%= val._id %>">
                                                        <%= val.categoryName %>
                                                    </option>
                                                    <% }) %>
                                            </select>
                                        </div>
                                    </div>
                                </div>
                                <div class="col-md-9">
                                    <div class="form-group row">
                                        <label for="fname" class="col-sm-6 text-right control-label col-form-label">Sub
                                            Category
                                            Name</label>
                                        <div class="col-sm-6 p-0">
                                            <select name="subCategory" id="subcategory"
                                                class="form-control custom-select" style="width: 190px;">
                                                <option>--Select subcategory--</option>
                                            </select>
                                        </div>
                                    </div>
                                </div>
                                <div class="col-md-9">
                                    <div class="form-group row">
                                        <label for="fname"
                                            class="col-sm-6 text-right control-label col-form-label">Extra Category
                                            Name</label>
                                        <div class="col-sm-6 p-0">
                                            <input type="text" class="form-control" name="extraCategoryName"
                                                style="width: 190px;" id="fname" placeholder="Extra Category Name...">
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="border-top">
                                <div class="card-body">
                                    <input type="submit" class="btn btn-primary mx-auto d-block"
                                        value="Add Extra Category" />
                                </div>
                            </div>
                        </form>
                    </div>

                </div>
            </div>
        </div>

        <%- include('../footer') %>

            <script>
                document.addEventListener('DOMContentLoaded', () => {
                    let category = document.getElementById('category');
                    let subcategory = document.getElementById('subcategory');
                    category.addEventListener('change', () => {
                        let categoryId = category.value;
                        subcategory.innerHTML = '<option value="">Select Subcategory</option>';
                        fetch(`/extraCategory/subCategory?categoryId=${categoryId}`)
                            .then(res => res.json())
                            .then((data) => {
                                data.singleCat.forEach((v) => {
                                    let option = document.createElement('option');
                                    option.innerHTML = v.subCategoryName;
                                    option.setAttribute('value', v._id);
                                    subcategory.append(option);
                                })
                            })
                            .catch(err => {
                                console.log(err);
                            })
                    })
                })
            </script>